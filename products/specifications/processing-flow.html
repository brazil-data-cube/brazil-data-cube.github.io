

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>BDC Processing Flow &mdash; Brazil Data Cube</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/table_styling.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/bdc.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="CLEAROB" href="bands/CLEAROB.html" />
    <link rel="prev" title="BDC Grid" href="bdc-grid.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >
          

          
            <a href="../../index.html" class="icon icon-home"> Brazil Data Cube
          

          
            
            <img src="../../_static/logo-bdc.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Brazil Data Cube Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../products.html">BDC Data Products</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../specifications.html">Specifications</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="input-data.html">BDC Input Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="concepts.html">BDC Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="bdc-grid.html">BDC Grid</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">BDC Processing Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="naming.html">BDC Naming</a></li>
<li class="toctree-l3"><a class="reference internal" href="product-access.html">BDC Product Access</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../image-collections.html">Image Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cube-collections.html">Data Cube Collections</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Services and Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../worcap-2021.html">WorCAP 2021 - Introdução ao STAC e WTSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ibge-2021.html">IBGE 2021 - Workshop Brazil Data Cube com IBGE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sbsr-2021.html">SBSR Interim 2021 - Simpósio Brasileiro de Sensoriamento Remoto</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../worcap-2020.html">WorCAP 2020 - Geoinformática com Aplicações de Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datascience-2020.html">CAP-394 - Introdução a Data Science (2020)</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">References</a></li>
</ul>
<p class="caption"><span class="caption-text">General Information:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Brazil Data Cube</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../products.html">BDC Data Products</a> &raquo;</li>
        
          <li><a href="../specifications.html">Specifications</a> &raquo;</li>
        
      <li>BDC Processing Flow</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="bands/CLEAROB.html" class="btn btn-neutral float-right" title="CLEAROB" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="bdc-grid.html" class="btn btn-neutral float-left" title="BDC Grid" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bdc-processing-flow">
<span id="processing-flow"></span><h1>BDC Processing Flow<a class="headerlink" href="#bdc-processing-flow" title="Permalink to this headline">¶</a></h1>
<p>Several procedures are performed to generate BDC Data cube collections. Based on that, <a class="reference internal" href="#products-processing-flow"><span class="std std-numref">Figure 3</span></a> illustrates a diagram containing the main procedures used to generate BDC data products.</p>
<div class="align-center figure align-default" id="products-processing-flow">
<a class="reference internal image-reference" href="../../_images/bdc.png"><img alt="BDC Image collection ingestion and Data Cube generation" src="../../_images/bdc.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-number">Figure 3 - </span><span class="caption-text">BDC Image collection ingestion and Data Cube generation.</span><a class="headerlink" href="#products-processing-flow" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="image-collection-builder">
<h2>Image Collection builder<a class="headerlink" href="#image-collection-builder" title="Permalink to this headline">¶</a></h2>
<div class="section" id="atmospheric-correction">
<h3>Atmospheric Correction<a class="headerlink" href="#atmospheric-correction" title="Permalink to this headline">¶</a></h3>
<p>The atmospheric correction procedure relies on each sensor characteristics. Due to that, for each sensor different processes may be applied, for instance, atmospheric correction is performed for Sentinel-2/MSI images using the Sen2cor <span id="id1">[<a class="reference internal" href="../../references.html#id10">9</a>]</span>, while for Landsat-8/OLI this procedure is performed through LaSRC <span id="id2">[<a class="reference internal" href="../../references.html#id26">21</a>]</span> and for CBERS-4/AWFI is executed by MS3 <span id="id3">[<a class="reference internal" href="../../references.html#id19">4</a>]</span>. Once this process is performed and the resulting data is cataloged, Surface Reflectance collection are available to be used to produce Data Cube Collections.</p>
</div>
<div class="section" id="cloud-masking">
<h3>Cloud Masking<a class="headerlink" href="#cloud-masking" title="Permalink to this headline">¶</a></h3>
<p>Cloud masking algorithms can be used to detect undesirable areas, such as cloud, cloud shadows or snow. However, cloud masking algorithm also depends on the characteristic of each sensor. Based on that, for Sentinel-2 we use the standard SCL product provided by Sen2cor, for Landsat-8 the Fmask (version 4.2) is being used <span id="id4">[<a class="reference internal" href="../../references.html#id17">14</a>]</span> while for CBERS-4 this processing is performed using CMASK due to it reduced number of spectral bands. Once this process is performed and the data is cataloged, the Surface Reflectance Image Collections becomes available.</p>
</div>
</div>
<div class="section" id="data-cube-builder">
<h2>Data Cube Builder<a class="headerlink" href="#data-cube-builder" title="Permalink to this headline">¶</a></h2>
<div class="section" id="warp-merge-reprojecting-resampling-and-griding">
<h3>Warp (Merge, Reprojecting, Resampling and Griding)<a class="headerlink" href="#warp-merge-reprojecting-resampling-and-griding" title="Permalink to this headline">¶</a></h3>
<p>In order to build the data cube collections, all input images must be at the same projection, using the same tile system and present the same spatial resolution. The Warp procedure perform this standardization and can be seen in <a class="reference internal" href="#products-cube-builder"><span class="std std-numref">Figure 4</span></a>. Warp consists in cropping and mosaicking all images that superimpose a target tile of the common grid, for a specific date. This spatial mosaic is reprojected to the target tile reference system and all bands are resampled to a determined spatial resolution through a bilinear function, except for quality assessment band, which is resampled using nearest neighbor to avoid changes on the image values.</p>
<div class="align-center figure align-default" id="products-cube-builder">
<a class="reference internal image-reference" href="../../_images/cube-builder.png"><img alt="BDC Cube generation" src="../../_images/cube-builder.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-number">Figure 4 - </span><span class="caption-text">Data Cube generation.</span><a class="headerlink" href="#products-cube-builder" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="temporal-compositing">
<h3>Temporal Compositing<a class="headerlink" href="#temporal-compositing" title="Permalink to this headline">¶</a></h3>
<p>BDC Data Cube Collections can be categorized in two types, identity and regular. An identity data cube nature consists in using all available images from its sensors original acquisitions. Based on that, its temporal compositing function is identity. Temporal Compositing function can be used to generate regular series. This is performed by reducing the time dimension, which generates regularly spaced in time observations, here called regular data cubes.</p>
<p>Three temporal compositing functions are being used in BDC: ( <em>i</em> ) average, ( <em>ii</em> ) median, and ( <em>iii</em> ) stack. These functions are operations applied on valid observations, which are not detected as cloud or cloud shadow by the quality assessment band, considering the time dimension and a time step, e. g. monthly or 16 days. The Average temporal composing consists in the average of the observed values. The Median temporal compositing consists in the median value of the observations. The stack temporal compositing consists in aggregating pixels from all images in the time interval according to each image quantity of valid pixels, e. g. a pixel from an image with efficacy of 95% (5% of cloud, cloud shadows or partial image) is more reliable of compositing the final image than a pixel from a 60% efficacy image. The mentioned compositing functions can be seen in <a class="reference internal" href="#products-compositing-functions"><span class="std std-numref">Figure 5</span></a>.</p>
<div class="align-center figure align-default" id="products-compositing-functions">
<a class="reference internal image-reference" href="../../_images/compositing-function.png"><img alt="BDC Time Compositing Functions" src="../../_images/compositing-function.png" style="width: 720px;" /></a>
<p class="caption"><span class="caption-number">Figure 5 - </span><span class="caption-text">BDC Time Compositing Functions.</span><a class="headerlink" href="#products-compositing-functions" title="Permalink to this image">¶</a></p>
</div>
<p>After the time compositing function is applied, the Brazil Data Cube Builder also calculates the NDVI and EVI spectral indices using the spectral bands of the time composed data cube. Besides that, for the time composed data cubes, three provenance bands are also generated for tracking characteristics of the composite period. The data product bands are <a class="reference internal" href="bands/CLEAROB.html"><span class="doc">CLEAROB</span></a>, <a class="reference internal" href="bands/TOTALOB.html"><span class="doc">TOTALOB</span></a> and <a class="reference internal" href="bands/PROVENANCE.html"><span class="doc">PROVENANCE</span></a>.</p>
<div class="toctree-wrapper compound">
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="bands/CLEAROB.html" class="btn btn-neutral float-right" title="CLEAROB" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="bdc-grid.html" class="btn btn-neutral float-left" title="BDC Grid" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, INPE.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-178140681-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>